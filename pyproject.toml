[tool.bandit]
exclude_dirs = [
    "test",
    "scripts",
    ".venv",
    "cdk.out"
]
skips = [
    "B403"
]

[tool.black]
line-length = 120

[tool.isort]
line_length = 120
profile = "black"
force_alphabetical_sort_within_sections = true
skip_glob = [
    "cdk.out/*"
]

[tool.mypy]
ignore_missing_imports = true
disallow_untyped_defs = true
disallow_untyped_decorators = false
disallow_incomplete_defs = true
disallow_any_unimported = false
no_implicit_optional = true
check_untyped_defs = true
warn_return_any = true
warn_unused_ignores = true
strict_optional = true
show_error_codes = true

[tool.ruff]
lint.ignore = ["D401"]
lint.select = ["PLC0415"]  # Flag imports outside top-level
line-length = 120

[tool.ruff.lint.per-file-ignores]
# Allow imports in functions for test files
"test/**/*.py" = ["PLC0415"]
"**/test_*.py" = ["PLC0415"]

[tool.pytest.ini_options]
addopts = "--strict-markers -vv -x"
markers = [
    "api: API tests",
    "cdk_deployed: CDK infrastructure deployed",
]
testpaths = [
    "test/python"
]
